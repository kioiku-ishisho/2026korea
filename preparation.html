<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡Œå‰æº–å‚™ - é¦–çˆ¾æ—…éŠæ”»ç•¥</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo">ğŸ‡°ğŸ‡· 2026é¦–çˆ¾æ—…éŠæ”»ç•¥</a>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">é¦–é </a></li>
                <li><a href="preparation.html" class="active">è¡Œå‰æº–å‚™</a></li>
                <li><a href="day1.html">ç¬¬ä¸€å¤©</a></li>
                <li><a href="day2.html">ç¬¬äºŒå¤©</a></li>
                <li><a href="day3.html">ç¬¬ä¸‰å¤©</a></li>
                <li><a href="day4.html">ç¬¬å››å¤©</a></li>
                <li><a href="day5.html">ç¬¬äº”å¤©</a></li>
                <li><a href="day6.html">ç¬¬å…­å¤©</a></li>
                <li><a href="day7.html">ç¬¬ä¸ƒå¤©</a></li>
                <li><a href="day8.html">ç¬¬å…«å¤©</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="day-header">
            <h1>ğŸ“‹ è¡Œå‰æº–å‚™æ¸…å–®</h1>
            <p class="date">å‡ºç™¼å‰å¿…å‚™ç‰©å“èˆ‡æ³¨æ„äº‹é …</p>
        </div>

        <section class="schedule-section">
            <div class="preparation-list">
                <div class="prep-category">
                    <h3>ğŸ“„ è­‰ä»¶æ–‡ä»¶</h3>
                    <ul>
                        <li>âœ“ è­·ç…§ï¼ˆæœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Šï¼‰</li>
                        <li>âœ“ æ©Ÿç¥¨ç¢ºèªå–®</li>
                        <li>âœ“ é£¯åº—é è¨‚ç¢ºèªå–®</li>
                        <li>âœ“ è­·ç…§å½±æœ¬ï¼ˆå‚™ç”¨ï¼‰</li>
                    </ul>
                </div>
                <div class="prep-category">
                    <h3>ğŸ’° é‡‘éŒ¢ç›¸é—œ</h3>
                    <ul>
                        <li>âœ“ ç¾é‡‘ï¼ˆå°å¹£æˆ–ç¾é‡‘ï¼Œç”¨æ–¼æ›åŒ¯ï¼‰</li>
                        <li>âœ“ ä¿¡ç”¨å¡ï¼ˆVisa/Mastercardï¼‰</li>
                        <li>âœ“ ææ¬¾å¡ï¼ˆç¢ºèªæµ·å¤–ææ¬¾åŠŸèƒ½ï¼‰</li>
                        <li>âœ“ é›¶éŒ¢åŒ…ï¼ˆå°é¡éŸ“å…ƒï¼‰</li>
                    </ul>
                </div>
                <div class="prep-category">
                    <h3>ğŸ“± é›»å­è¨­å‚™</h3>
                    <ul>
                        <li>âœ“ æ‰‹æ©ŸåŠå……é›»å™¨</li>
                        <li>âœ“ è¡Œå‹•é›»æº</li>
                        <li>âœ“ è½‰æ¥é ­ï¼ˆéŸ“åœ‹ä½¿ç”¨Type C/Fï¼Œ220Vï¼‰</li>
                        <li>âœ“ ç›¸æ©Ÿï¼ˆå¯é¸ï¼‰</li>
                        <li>âœ“ è€³æ©Ÿ</li>
                    </ul>
                </div>
                <div class="prep-category">
                    <h3>ğŸ‘• è¡£ç‰©ç”¨å“</h3>
                    <ul>
                        <li>âœ“ ä¿æš–è¡£ç‰©ï¼ˆ1æœˆé¦–çˆ¾è¼ƒå†·ï¼Œç´„-5Â°C~5Â°Cï¼‰</li>
                        <li>âœ“ ç¾½çµ¨å¤–å¥—ã€åœå·¾ã€æ‰‹å¥—</li>
                        <li>âœ“ èˆ’é©çš„æ­¥è¡Œé‹</li>
                        <li>âœ“ æ›æ´—è¡£ç‰©</li>
                        <li>âœ“ å€‹äººè¡›ç”Ÿç”¨å“</li>
                    </ul>
                </div>
                <div class="prep-category">
                    <h3>ğŸ’Š å¥åº·ç”¨å“</h3>
                    <ul>
                        <li>âœ“ å€‹äººå¸¸ç”¨è—¥å“</li>
                        <li>âœ“ æ„Ÿå†’è—¥ã€è…¸èƒƒè—¥</li>
                        <li>âœ“ å£ç½©</li>
                        <li>âœ“ æ¿•ç´™å·¾ã€ä¹¾æ´—æ‰‹</li>
                    </ul>
                </div>
                <div class="prep-category" id="customItemsCategory">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="margin: 0;">âœ¨ è‡ªè¨‚ç‰©å“</h3>
                        <button id="addItemBtn" class="add-schedule-btn" style="background: linear-gradient(135deg, #0047A0 0%, #CD2E3A 100%); color: white; border: none; padding: 0.5rem 1rem; border-radius: 25px; font-size: 0.9rem; font-weight: bold; cursor: pointer; box-shadow: 0 2px 10px rgba(0, 71, 160, 0.3); transition: all 0.3s ease; display: flex; align-items: center; gap: 0.3rem;">
                            â• æ–°å¢ç‰©å“
                        </button>
                    </div>
                    <ul id="customItemsList">
                        <!-- ä½¿ç”¨è€…æ–°å¢çš„ç‰©å“å°‡é¡¯ç¤ºåœ¨é€™è£¡ -->
                    </ul>
                </div>
                <div class="prep-category">
                    <h3>ğŸ“² æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼</h3>
                    <ul>
                        <li>âœ“ Naver Map / Kakao Mapï¼ˆåœ°åœ–å°èˆªï¼‰</li>
                        <li>âœ“ Papagoï¼ˆç¿»è­¯è»Ÿé«”ï¼‰</li>
                        <li>âœ“ Kakao Tï¼ˆè¨ˆç¨‹è»Šï¼‰</li>
                        <li>âœ“ Seoul Metroï¼ˆåœ°éµè·¯ç·šï¼‰</li>
                        <li>âœ“ é›¢ç·šåœ°åœ–ï¼ˆå‚™ç”¨ï¼‰</li>
                    </ul>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <p style="font-size: 0.9rem; color: #666; margin-bottom: 0.5rem;"><strong>æ¨è–¦æ‡‰ç”¨ç¨‹å¼èªªæ˜ï¼š</strong></p>
                        <ul style="font-size: 0.85rem; color: #555; padding-left: 1.5rem;">
                            <li><strong>Naver Map / Kakao Mapï¼š</strong>éŸ“åœ‹æœ€å¸¸ç”¨çš„åœ°åœ–å°èˆªæ‡‰ç”¨ï¼Œæä¾›è©³ç´°çš„äº¤é€šè³‡è¨Š</li>
                            <li><strong>Papagoï¼š</strong>éŸ“åœ‹é–‹ç™¼çš„ç¿»è­¯è»Ÿé«”ï¼Œæ”¯æ´ä¸­éŸ“äº’è­¯</li>
                            <li><strong>Kakao Tï¼š</strong>éŸ“åœ‹æœ€å¤§çš„è¨ˆç¨‹è»Šå«è»Šå¹³å°</li>
                            <li><strong>Seoul Metroï¼š</strong>é¦–çˆ¾åœ°éµå®˜æ–¹æ‡‰ç”¨ï¼Œæä¾›è·¯ç·šæŸ¥è©¢èˆ‡æ™‚åˆ»è¡¨</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="schedule-section">
            <h2>ğŸ’¡ é‡è¦æé†’</h2>
            <div class="tips-section">
                <h4>å‡ºç™¼å‰æª¢æŸ¥äº‹é …</h4>
                <ul>
                    <li>ç¢ºèªè­·ç…§æœ‰æ•ˆæœŸè‡³å°‘6å€‹æœˆä»¥ä¸Š</li>
                    <li>ç¢ºèªæ©Ÿç¥¨å’Œé£¯åº—é è¨‚è³‡è¨Š</li>
                    <li>ç¢ºèªæ‰‹æ©Ÿåœ‹éš›æ¼«éŠæˆ–è³¼è²·ç•¶åœ° SIM å¡</li>
                    <li>ä¸‹è¼‰å¿…è¦çš„æ‰‹æ©Ÿæ‡‰ç”¨ç¨‹å¼</li>
                    <li>æº–å‚™è½‰æ¥é ­ï¼ˆéŸ“åœ‹ä½¿ç”¨Type C/Fæ’é ­ï¼‰</li>
                    <li>ç¢ºèªä¿¡ç”¨å¡æµ·å¤–ä½¿ç”¨åŠŸèƒ½å·²é–‹å•Ÿ</li>
                    <li>æº–å‚™å¸¸ç”¨è—¥å“å’Œå€‹äººè¡›ç”Ÿç”¨å“</li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 é¦–çˆ¾æ—…éŠæ”»ç•¥ | ç¥æ—…é€”æ„‰å¿«ï¼</p>
        <div class="footer-links" style="margin-top: 1rem; display: flex; justify-content: center; align-items: center; gap: 1.5rem; flex-wrap: wrap;">
            <a href="https://tchinese.seoul.go.kr/" target="_blank" rel="noopener noreferrer" style="color: #0047A0; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: color 0.3s;">
                <span style="font-size: 1.2rem;">ğŸ›ï¸</span>
                <span>é¦–çˆ¾å¸‚å®˜æ–¹ç¶²ç«™</span>
            </a>
            <a href="https://www.instagram.com/seoul.southkorea/" target="_blank" rel="noopener noreferrer" class="instagram-link" style="color: #0047A0; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: color 0.3s;">
                <span style="font-size: 1.2rem;">ğŸ“·</span>
                <span>é¦–çˆ¾ Instagram</span>
            </a>
        </div>
    </footer>
    <script>
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        if (menuToggle) {
            menuToggle.addEventListener('click', function() {
                navLinks.classList.toggle('active');
            });
            const navItems = navLinks.querySelectorAll('a');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    navLinks.classList.remove('active');
                });
            });
        }
    </script>

    <!-- è¿”å›é é¦–æŒ‰éˆ• -->
    <button class="scroll-to-top" id="scrollToTop" aria-label="è¿”å›é é¦–">â†‘</button>

    <!-- æ–°å¢ç‰©å“ Modal -->
    <div id="itemModal" class="schedule-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div class="modal-content" style="background: white; padding: 2rem; border-radius: 15px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: #0047A0; margin: 0;">â• æ–°å¢ç‰©å“</h2>
                <button id="closeItemModalBtn" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">&times;</button>
            </div>
            <form id="itemForm">
                <div style="margin-bottom: 1.5rem;">
                    <label for="itemName" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">ç‰©å“åç¨±ï¼š</label>
                    <input type="text" id="itemName" required style="width: 100%; padding: 0.8rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" id="cancelItemBtn" style="padding: 0.8rem 1.5rem; border: 2px solid #e0e0e0; background: white; color: #666; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s;">å–æ¶ˆ</button>
                    <button type="submit" style="padding: 0.8rem 1.5rem; border: none; background: linear-gradient(135deg, #0047A0 0%, #CD2E3A 100%); color: white; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s;">æ–°å¢</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // è¿”å›é é¦–æŒ‰éˆ•åŠŸèƒ½
        const scrollToTopBtn = document.getElementById('scrollToTop');
        
        // ç›£è½æ»¾å‹•äº‹ä»¶
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('show');
            } else {
                scrollToTopBtn.classList.remove('show');
            }
        });
        
        // é»æ“ŠæŒ‰éˆ•è¿”å›é é¦–
        scrollToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Firebase è‡ªè¨‚ç‰©å“åŠŸèƒ½
        const customItemsList = document.getElementById('customItemsList');
        const addItemBtn = document.getElementById('addItemBtn');
        const itemModal = document.getElementById('itemModal');
        const closeItemModalBtn = document.getElementById('closeItemModalBtn');
        const cancelItemBtn = document.getElementById('cancelItemBtn');
        const itemForm = document.getElementById('itemForm');
        const itemNameInput = document.getElementById('itemName');

        // Firebase è³‡æ–™åº«å¼•ç”¨
        let itemsRef = null;
        let customItems = {}; // å„²å­˜æ‰€æœ‰ç‰©å“çš„ ID å°æ‡‰

        // åˆå§‹åŒ– Firebase
        if (typeof firebase !== 'undefined' && firebase.database) {
            itemsRef = firebase.database().ref('preparation/customItems');
        }

        // æ‰“é–‹ Modal
        function openItemModal() {
            itemModal.style.display = 'flex';
            itemNameInput.value = '';
            itemForm.dataset.editMode = 'false';
            itemForm.dataset.editItemId = '';
        }

        // é—œé–‰ Modal
        function closeItemModal() {
            itemModal.style.display = 'none';
            itemNameInput.value = '';
            itemForm.dataset.editMode = 'false';
            itemForm.dataset.editItemId = '';
        }

        // æ·»åŠ ç‰©å“é …ç›®åˆ°åˆ—è¡¨
        function addItemToList(name, itemId = null) {
            const li = document.createElement('li');
            const itemIdValue = itemId || `item_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            li.dataset.itemId = itemIdValue;
            li.style.display = 'flex';
            li.style.justifyContent = 'space-between';
            li.style.alignItems = 'center';
            li.style.padding = '0.5rem 0';
            li.style.borderBottom = '1px solid #e0e0e0';
            
            li.innerHTML = `
                <span>âœ“ ${name}</span>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="edit-item-btn" style="background: #0047A0; color: white; border: none; padding: 0.3rem 0.8rem; border-radius: 5px; cursor: pointer; font-size: 0.8rem; transition: background 0.3s;">ç·¨è¼¯</button>
                    <button class="delete-item-btn" style="background: #CD2E3A; color: white; border: none; padding: 0.3rem 0.8rem; border-radius: 5px; cursor: pointer; font-size: 0.8rem; transition: background 0.3s;">åˆªé™¤</button>
                </div>
            `;

            // ç·¨è¼¯æŒ‰éˆ•
            li.querySelector('.edit-item-btn').addEventListener('click', function() {
                itemNameInput.value = name;
                itemForm.dataset.editMode = 'true';
                itemForm.dataset.editItemId = itemIdValue;
                openItemModal();
            });

            // åˆªé™¤æŒ‰éˆ•
            li.querySelector('.delete-item-btn').addEventListener('click', function() {
                if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤ç‰©å“å—ï¼Ÿ')) {
                    if (itemsRef) {
                        itemsRef.child(itemIdValue).remove();
                    } else {
                        li.remove();
                        saveToLocalStorage();
                    }
                }
            });

            customItemsList.appendChild(li);
            customItems[itemIdValue] = li;
            return itemIdValue;
        }

        // ä¿å­˜åˆ° Firebase
        function saveToFirebase() {
            if (!itemsRef) {
                saveToLocalStorage();
                return;
            }

            const items = {};
            customItemsList.querySelectorAll('li').forEach(li => {
                const itemId = li.dataset.itemId;
                const name = li.querySelector('span').textContent.replace('âœ“ ', '');
                items[itemId] = {
                    name: name,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                };
            });

            itemsRef.set(items);
        }

        // ä¿å­˜åˆ° localStorageï¼ˆå‚™ç”¨ï¼‰
        function saveToLocalStorage() {
            const items = Array.from(customItemsList.querySelectorAll('li')).map(li => ({
                id: li.dataset.itemId,
                name: li.querySelector('span').textContent.replace('âœ“ ', '')
            }));
            localStorage.setItem('preparation_customItems', JSON.stringify(items));
        }

        // å¾ Firebase è¼‰å…¥
        function loadFromFirebase() {
            if (!itemsRef) {
                loadFromLocalStorage();
                return;
            }

            itemsRef.on('value', (snapshot) => {
                const data = snapshot.val();
                customItemsList.innerHTML = '';
                customItems = {};

                if (data) {
                    Object.keys(data).forEach(key => {
                        const item = data[key];
                        addItemToList(item.name, key);
                    });
                }
            });
        }

        // å¾ localStorage è¼‰å…¥ï¼ˆå‚™ç”¨ï¼‰
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('preparation_customItems');
            if (saved) {
                try {
                    const items = JSON.parse(saved);
                    items.forEach(item => {
                        addItemToList(item.name, item.id);
                    });
                } catch (e) {
                    console.error('è¼‰å…¥å¤±æ•—:', e);
                }
            }
        }

        // è¡¨å–®æäº¤
        itemForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = itemNameInput.value.trim();
            if (!name) return;

            const isEditMode = itemForm.dataset.editMode === 'true';
            const editItemId = itemForm.dataset.editItemId;

            if (isEditMode && editItemId) {
                // ç·¨è¼¯æ¨¡å¼
                const li = customItemsList.querySelector(`li[data-item-id="${editItemId}"]`);
                if (li) {
                    li.querySelector('span').textContent = `âœ“ ${name}`;
                    saveToFirebase();
                }
            } else {
                // æ–°å¢æ¨¡å¼
                addItemToList(name);
                saveToFirebase();
            }

            closeItemModal();
        });

        // äº‹ä»¶ç›£è½
        if (addItemBtn) addItemBtn.addEventListener('click', openItemModal);
        if (closeItemModalBtn) closeItemModalBtn.addEventListener('click', closeItemModal);
        if (cancelItemBtn) cancelItemBtn.addEventListener('click', closeItemModal);
        if (itemModal) {
            itemModal.addEventListener('click', function(e) {
                if (e.target === itemModal) {
                    closeItemModal();
                }
            });
        }

        // é é¢è¼‰å…¥æ™‚å¾ Firebase è¼‰å…¥è³‡æ–™
        if (typeof firebase !== 'undefined' && firebase.database) {
            // ç­‰å¾… Firebase åˆå§‹åŒ–
            setTimeout(() => {
                if (firebase.database) {
                    itemsRef = firebase.database().ref('preparation/customItems');
                    loadFromFirebase();
                } else {
                    loadFromLocalStorage();
                }
            }, 500);
        } else {
            loadFromLocalStorage();
        }
    </script>
</body>
</html>

